- project:
    templates:
      - openstack-specs-jobs
    check:
      jobs:
        - service-types-authority-tox-publish
        - openstack-tox-pep8
    gate:
      jobs:
        - service-types-authority-tox-publish
        - openstack-tox-pep8
    post:
      jobs:
        - propose-updates:
            vars:
              update_target: os-service-types
            dependencies:
              - publish-service-types-authority
        - publish-service-types-authority
- job:
    name: service-types-authority-tox-publish
    parent: tox
    description: |
      Run tests for service-types-authority project.

      Uses tox with the ``publish`` environment.
    success-url: html/
    post-run: playbooks/fetch-publish-output.yaml
    vars:
      tox_envlist: publish
